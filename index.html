<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Ladder | Ù…Ù†ØµØ© Ø§Ù„Ø³Ù„Ù… Ø§Ù„Ù…Ø¹Ø±ÙÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #3b82f6;
            --accent: #8b5cf6;
            --success: #10b981;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --tier-1-gold: #fbbf24;
            --tier-2-silver: #38bdf8;
            --tier-3-bronze: #9ca3af;
        }

        * { box-sizing: border-box; outline: none; }
        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            padding-bottom: 50px;
        }

        /* --- Animations --- */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); } 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); } }
        @keyframes successPop { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* --- Header --- */
        header {
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(12px);
            padding: 1rem 2rem; position: sticky; top: 0; z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.1); display: flex;
            justify-content: space-between; align-items: center;
        }
        .logo { font-size: 1.6rem; font-weight: 900; color: var(--primary); display: flex; align-items: center; gap: 10px; }
        .logo span { color: #fff; }
        .btn-upload {
            background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; border: none;
            padding: 0.7rem 1.8rem; border-radius: 50px; cursor: pointer; font-weight: bold;
            display: flex; align-items: center; gap: 10px; transition: 0.3s;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }
        .btn-upload:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5); }

        /* --- Tiers --- */
        .tier-section { padding: 2.5rem; margin: 2rem auto; max-width: 1200px; border-radius: 20px; min-height: 150px; }
        .tier-header { display: flex; align-items: center; gap: 15px; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .tier-title { font-size: 1.8rem; font-weight: 900; margin: 0; }
        
        .tier-1 { background: linear-gradient(180deg, rgba(251, 191, 36, 0.05) 0%, transparent 100%); border: 1px solid rgba(251, 191, 36, 0.2); }
        .tier-1 .tier-title { color: var(--tier-1-gold); }
        .tier-2 { border-left: 5px solid var(--tier-2-silver); background: rgba(30, 41, 59, 0.3); }
        .tier-2 .tier-title { color: var(--tier-2-silver); }
        .tier-3 { border-left: 5px solid var(--tier-3-bronze); background: rgba(15, 23, 42, 0.6); }
        .tier-3 .tier-title { color: var(--tier-3-bronze); }

        /* --- Cards --- */
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 1.5rem; }
        .card {
            background: var(--bg-card); border-radius: 16px; overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column;
            animation: fadeIn 0.6s ease-out;
        }
        .card:hover { transform: translateY(-8px); border-color: var(--primary); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .card-media {
            height: 160px; background: #020617; display: flex; align-items: center; justify-content: center;
            color: var(--text-muted); font-size: 3.5rem; position: relative;
            background-image: radial-gradient(circle at center, #1e293b 0%, #020617 100%);
        }
        .type-badge {
            position: absolute; top: 12px; right: 12px;
            background: rgba(59, 130, 246, 0.9); color: #fff;
            padding: 5px 10px; border-radius: 6px; font-size: 0.75rem; font-weight: 800; letter-spacing: 0.5px;
        }
        .card-body { padding: 1.5rem; flex-grow: 1; }
        .card-title { margin: 0 0 0.8rem 0; font-size: 1.25rem; line-height: 1.4; }
        .card-desc { font-size: 0.9rem; color: var(--text-muted); line-height: 1.6; }
        .card-actions {
            padding: 1rem 1.5rem; background: rgba(0,0,0,0.2); border-top: 1px solid rgba(255,255,255,0.05);
            display: flex; justify-content: space-between; align-items: center;
        }
        .btn-action { background: none; border: none; color: var(--text-muted); cursor: pointer; transition: 0.2s; display: flex; gap: 6px; align-items: center; font-size: 0.9rem; }
        .btn-action:hover { color: white; }
        .btn-view { color: var(--primary); font-weight: bold; background: rgba(59, 130, 246, 0.1); padding: 6px 12px; border-radius: 6px; }
        .btn-view:hover { background: var(--primary); color: white; }

        /* --- READER MODAL --- */
        .reader-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 3000;
            display: none; justify-content: center; align-items: center;
            backdrop-filter: blur(8px); opacity: 0; transition: opacity 0.3s;
        }
        .reader-overlay.active { opacity: 1; }
        .reader-content {
            background: #0f172a; width: 900px; max-width: 95%; height: 90%;
            border-radius: 20px; overflow: hidden; display: flex; flex-direction: column;
            border: 1px solid #334155; box-shadow: 0 25px 60px rgba(0,0,0,0.7);
            transform: scale(0.95); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .reader-overlay.active .reader-content { transform: scale(1); }
        .reader-header {
            padding: 1.5rem 2rem; background: #1e293b; border-bottom: 1px solid #334155;
            display: flex; justify-content: space-between; align-items: center;
        }
        .reader-title-area h3 { margin: 0; font-size: 1.4rem; color: var(--primary); }
        .reader-meta { font-size: 0.85rem; color: var(--text-muted); margin-top: 5px; }
        .reader-body { padding: 3rem; overflow-y: auto; flex-grow: 1; color: #e2e8f0; line-height: 1.9; font-size: 1.1rem; scroll-behavior: smooth; }
        .btn-close-reader {
            background: rgba(255,255,255,0.1); color: white; border: none; width: 36px; height: 36px;
            border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s;
        }
        .btn-close-reader:hover { background: #dc2626; transform: rotate(90deg); }

        /* Course HTML Styles */
        .course-html { animation: slideUp 0.6s ease-out; max-width: 800px; margin: 0 auto; }
        .course-html h1 { font-size: 2.2rem; margin-bottom: 2rem; background: linear-gradient(90deg, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .course-html h2 { color: var(--tier-2-silver); margin-top: 3rem; font-size: 1.5rem; display: flex; align-items: center; gap: 10px; }
        .highlight-box {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; padding: 2rem; margin: 2rem 0; position: relative; overflow: hidden;
        }
        .highlight-box::before { content: ''; position: absolute; top: 0; right: 0; width: 4px; height: 100%; background: var(--primary); }
        .step-list { list-style: none; padding: 0; margin: 2rem 0; display: grid; gap: 15px; }
        .step-item { background: #1e293b; padding: 1.5rem; border-radius: 10px; border: 1px solid #334155; display: flex; gap: 15px; align-items: flex-start; transition: 0.3s; }
        .step-item:hover { border-color: var(--primary); transform: translateX(-5px); }
        .step-num { background: var(--primary); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; }
        .grid-visual { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 2rem 0; }
        .grid-box { padding: 2rem; border-radius: 12px; color: white; text-align: center; display: flex; flex-direction: column; justify-content: center; min-height: 150px; }

        /* SUCCESS BUTTON STYLE */
        .btn-complete {
            display: flex; justify-content: center; align-items: center; gap: 10px;
            width: 100%; max-width: 300px; margin: 4rem auto 0;
            padding: 1rem; background: var(--primary); color: white; border: none; border-radius: 12px;
            font-size: 1.1rem; font-weight: bold; cursor: pointer; text-align: center;
            transition: all 0.3s ease; animation: pulse 2s infinite;
        }
        .btn-complete:hover { background: #2563eb; animation: none; transform: translateY(-2px); }
        .btn-complete.success {
            background-color: var(--success); animation: successPop 0.3s ease-out; cursor: default;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <i class="fa-solid fa-layer-group fa-lg"></i>
            <div>Knowledge <span>Ladder</span></div>
        </div>
        <button class="btn-upload" onclick="alert('Demo Mode')"><i class="fa-solid fa-cloud-arrow-up"></i> Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø¹Ø±ÙØ©</button>
    </header>

    <main>
        <section class="tier-section tier-1">
            <div class="tier-header">
                <i class="fa-solid fa-crown fa-2x" style="color: var(--tier-1-gold)"></i>
                <div><h2 class="tier-title">Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø°Ù‡Ø¨ÙŠ (Tier 1)</h2><div style="font-size:0.9rem; color:#64748b">The Gold Standard</div></div>
            </div>
            <div class="grid-container" id="tier1-container"></div>
        </section>

        <section class="tier-section tier-2">
            <div class="tier-header">
                <i class="fa-solid fa-flask fa-2x" style="color: var(--tier-2-silver)"></i>
                <div><h2 class="tier-title">Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± (Tier 2)</h2><div style="font-size:0.9rem; color:#64748b">Active Development</div></div>
            </div>
            <div class="grid-container" id="tier2-container"></div>
        </section>

        <section class="tier-section tier-3">
            <div class="tier-header">
                <i class="fa-solid fa-seedling fa-2x" style="color: var(--tier-3-bronze)"></i>
                <div><h2 class="tier-title">Ø§Ù„Ù…Ø®ØªØ¨Ø± (Tier 3)</h2><p style="color:#94a3b8; margin: 5px 0 0 0">Ø£ÙÙƒØ§Ø± Ø¬Ø¯ÙŠØ¯Ø© ØªÙ†ØªØ¸Ø± Ø§Ù„ØªØ·ÙˆÙŠØ±.. Ø§Ø¶ØºØ· <strong>Ù…Ø¹Ø§ÙŠÙ†Ø©</strong> Ù„Ù„ØªØ¬Ø±Ø¨Ø©.</p></div>
            </div>
            <div class="grid-container" id="tier3-container"></div>
        </section>
    </main>

    <div class="reader-overlay" id="readerModal">
        <div class="reader-content">
            <div class="reader-header">
                <div class="reader-title-area">
                    <h3 id="readerTitle">...</h3>
                    <div class="reader-meta" id="readerAuthor">...</div>
                </div>
                <button class="btn-close-reader" onclick="closeReader()"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="reader-body" id="readerBody"></div>
        </div>
    </div>

    <script>
        // *** CRITICAL UPDATE: Changed key to 'v2' to force fresh data load ***
        const STORAGE_KEY = 'knowledge_ladder_db_v2';

        function generateCourses() {
    return [
        { 
            id: 1, 
            title: "Ø§Ø­ØªØ±Ø§Ù ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ (Deep Work)", 
            type: "course", 
            tier: 3, 
            author: "TechLead", 
            date: "2026-02-01",
            desc: "Ø¯Ù„ÙŠÙ„ Ø¹Ù…Ù„ÙŠ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªØ±ÙƒÙŠØ² ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø±Ù‡Ø§Ù‚ Ø§Ù„Ø°Ù‡Ù†ÙŠ Ù„Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ† ÙˆØµÙ†Ø§Ø¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰.",
            htmlContent: `
                <div class="course-html">
                    <div style="text-align:center; margin-bottom:2rem">
                        <i class="fa-solid fa-stopwatch fa-3x" style="color:#ef4444; margin-bottom:10px"></i>
                        <h1 style="margin:0">ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ 2.0</h1>
                        <p style="color:#94a3b8">ÙƒÙŠÙ ØªØ¶Ø§Ø¹Ù Ø¥Ù†ØªØ§Ø¬ÙŠØªÙƒ Ø¯ÙˆÙ† Ø£Ù† ØªØ­ØªØ±Ù‚ØŸ</p>
                    </div>

                    <div class="highlight-box">
                        <h3>ğŸ¤” Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</h3>
                        <p>Ù‡Ù„ Ø³Ø¨Ù‚ ÙˆØ¬Ù„Ø³Øª Ù„ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…ÙŠØ²Ø© (Feature) Ù„Ù…Ø¯Ø© 4 Ø³Ø§Ø¹Ø§Øª Ù…ØªÙˆØ§ØµÙ„Ø©ØŒ Ø«Ù… Ù†Ù‡Ø¶Øª ÙˆØ£Ù†Øª ØªØ´Ø¹Ø± Ø¨ØµØ¯Ø§Ø¹ ÙˆØªØ´ÙˆØ´ØŸ Ù‡Ø°Ø§ ÙŠØ³Ù…Ù‰ <strong>"Ø§Ù„Ø¥Ø±Ù‡Ø§Ù‚ Ø§Ù„Ù…Ø¹Ø±ÙÙŠ"</strong>. Ø¹Ù‚Ù„Ùƒ Ù„ÙŠØ³ Ù…ØµÙ…Ù…Ø§Ù‹ Ù„Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ø­Ø§Ø¯ Ù„ÙØªØ±Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø¯ÙˆÙ† ÙÙˆØ§ØµÙ„.</p>
                    </div>

                    <h2>ğŸ› ï¸ Ø§Ù„Ù…Ù†Ù‡Ø¬ÙŠØ© Ø§Ù„ØµØ­ÙŠØ­Ø© (The Protocol)</h2>
                    <p>Ø§Ù„ÙÙƒØ±Ø© Ù„ÙŠØ³Øª Ù…Ø¬Ø±Ø¯ "Ù…Ø¤Ù‚Øª". Ø§Ù„ÙÙƒØ±Ø© Ù‡ÙŠ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø°Ù‡Ù†ÙŠØ©. Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØªÙƒÙˆÙ† Ù…Ù† Ø¯ÙˆØ±Ø§Øª:</p>
                    
                    <ul class="step-list">
                        <li class="step-item">
                            <span class="step-num">1</span>
                            <div>
                                <strong>Ø¬Ù„Ø³Ø© Ø§Ù„ØªØ±ÙƒÙŠØ² (25 Ø¯Ù‚ÙŠÙ‚Ø©):</strong>
                                <p style="margin:5px 0 0 0; font-size:0.9rem; color:#cbd5e1">Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ù‡Ø§ØªÙØŒ Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ. Ù‡Ø¯Ù ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·. Ø¥Ø°Ø§ Ø·Ø±Ø£Øª ÙÙƒØ±Ø© Ø£Ø®Ø±Ù‰ØŒ Ø§ÙƒØªØ¨Ù‡Ø§ ÙÙŠ ÙˆØ±Ù‚Ø© Ø®Ø§Ø±Ø¬ÙŠØ© ÙˆØ¹Ø¯ ÙÙˆØ±Ø§Ù‹ Ù„Ù„Ø¹Ù…Ù„.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <span class="step-num">2</span>
                            <div>
                                <strong>Ø§Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ù‚ØµÙŠØ±Ø© (5 Ø¯Ù‚Ø§Ø¦Ù‚):</strong>
                                <p style="margin:5px 0 0 0; font-size:0.9rem; color:#cbd5e1">ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø±Ø§Ø­Ø© "Ø³Ù„Ø¨ÙŠØ©". Ø§Ø¨ØªØ¹Ø¯ Ø¹Ù† Ø§Ù„Ø´Ø§Ø´Ø©. Ù„Ø§ ØªØªØµÙØ­ ÙÙŠØ³Ø¨ÙˆÙƒ. Ø§ØªØ±Ùƒ Ø¹ÙŠÙ†ÙŠÙƒ ØªØ±ØªØ§Ø­Ø§Ù†.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <span class="step-num">3</span>
                            <div>
                                <strong>Ø§Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø© (15-30 Ø¯Ù‚ÙŠÙ‚Ø©):</strong>
                                <p style="margin:5px 0 0 0; font-size:0.9rem; color:#cbd5e1">Ø¨Ø¹Ø¯ Ø¥ØªÙ…Ø§Ù… 4 Ø¯ÙˆØ±Ø§Øª (Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ)ØŒ ÙƒØ§ÙØ¦ Ù†ÙØ³Ùƒ Ø¨Ø±Ø§Ø­Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©.</p>
                            </div>
                        </li>
                    </ul>

                    <div class="highlight-box" style="border-left: 4px solid #f59e0b; border-right:none; background: rgba(245, 158, 11, 0.1);">
                        <h3>ğŸ’¡ Ù†ØµÙŠØ­Ø© Ù„Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ† (Pro Tip)</h3>
                        <p>Ø£ÙƒØ¨Ø± Ø¹ÙŠØ¨ Ù„Ù„Ø¨ÙˆÙ…ÙˆØ¯ÙˆØ±Ùˆ Ù„Ù„Ù…Ø¨Ø±Ù…Ø¬ÙŠÙ† Ù‡Ùˆ Ù‚Ø·Ø¹ "Ø­Ø¨Ù„ Ø§Ù„Ø£ÙÙƒØ§Ø±" (Flow State).<br>
                        <strong>Ø§Ù„Ø­Ù„:</strong> Ø¥Ø°Ø§ Ø±Ù† Ø§Ù„Ø¬Ø±Ø³ ÙˆØ£Ù†Øª ÙÙŠ Ù…Ù†ØªØµÙ ÙƒÙˆØ¯ Ù…Ø¹Ù‚Ø¯ØŒ Ù„Ø§ ØªØªÙˆÙ‚Ù ÙÙˆØ±Ø§Ù‹. Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ø§Ù‹ (Comment) ÙŠØµÙ Ù…Ø§ ÙƒÙ†Øª ØªÙ†ÙˆÙŠ ÙØ¹Ù„Ù‡ØŒ Ø«Ù… ØªÙˆÙ‚Ù. Ù‡Ø°Ø§ ÙŠØ³Ù‡Ù„ Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù€ 5 Ø¯Ù‚Ø§Ø¦Ù‚.</p>
                    </div>

                    <button class="btn-complete" onclick="closeReaderWithSuccess(this)">
                        <span>âœ… Ù‚Ø±Ø£Øª ÙˆØ§Ø³ØªÙØ¯Øª</span>
                    </button>
                </div>
            `
        },
        { 
            id: 2, 
            title: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø¨Ù…ØµÙÙˆÙØ© Ø£ÙŠØ²Ù†Ù‡Ø§ÙˆØ±", 
            type: "course", 
            tier: 3, 
            author: "Senior Manager", 
            date: "2026-02-02",
            desc: "ØªÙˆÙ‚Ù Ø¹Ù† Ø§Ù„Ø§Ù†Ø´ØºØ§Ù„ ÙˆØ§Ø¨Ø¯Ø£ ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©. ÙƒÙŠÙ ØªÙØ±Ù‚ Ø¨ÙŠÙ† 'Ø§Ù„Ø¹Ø§Ø¬Ù„' Ùˆ 'Ø§Ù„Ù…Ù‡Ù…'ØŸ",
            htmlContent: `
                <div class="course-html">
                    <h1 style="text-align:center">ğŸ“Š Ù…ØµÙÙˆÙØ© Ø£ÙŠØ²Ù†Ù‡Ø§ÙˆØ±</h1>
                    <p style="text-align:center; font-size:1.1rem; margin-bottom:2rem">
                        "Ù…Ø§ Ù‡Ùˆ Ù…Ù‡Ù… Ù†Ø§Ø¯Ø±Ø§Ù‹ Ù…Ø§ ÙŠÙƒÙˆÙ† Ø¹Ø§Ø¬Ù„Ø§Ù‹ØŒ ÙˆÙ…Ø§ Ù‡Ùˆ Ø¹Ø§Ø¬Ù„ Ù†Ø§Ø¯Ø±Ø§Ù‹ Ù…Ø§ ÙŠÙƒÙˆÙ† Ù…Ù‡Ù…Ø§Ù‹."
                    </p>

                    <div class="grid-visual">
                        <div class="grid-box" style="background: linear-gradient(135deg, #ef4444, #991b1b);">
                            <i class="fa-solid fa-fire fa-2x"></i>
                            <h3>1. Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø£Ø²Ù…Ø§Øª</h3>
                            <p style="font-size:0.9rem">Ù‡Ø§Ù… ÙˆØ¹Ø§Ø¬Ù„</p>
                            <div style="background:rgba(0,0,0,0.3); padding:5px; border-radius:4px; font-size:0.8rem; margin-top:5px">Ø§ÙØ¹Ù„Ù‡ Ø§Ù„Ø¢Ù†</div>
                        </div>
                        <div class="grid-box" style="background: linear-gradient(135deg, #3b82f6, #1e40af);">
                            <i class="fa-solid fa-chess-knight fa-2x"></i>
                            <h3>2. Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¬ÙˆØ¯Ø©</h3>
                            <p style="font-size:0.9rem">Ù‡Ø§Ù… ÙˆØºÙŠØ± Ø¹Ø§Ø¬Ù„</p>
                            <div style="background:rgba(0,0,0,0.3); padding:5px; border-radius:4px; font-size:0.8rem; margin-top:5px">Ø®Ø·Ø· Ù„Ù‡ (Ù‡Ù†Ø§ Ø§Ù„Ù†Ø¬Ø§Ø­)</div>
                        </div>
                        <div class="grid-box" style="background: linear-gradient(135deg, #eab308, #854d0e);">
                            <i class="fa-solid fa-user-clock fa-2x"></i>
                            <h3>3. Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø®Ø¯Ø§Ø¹</h3>
                            <p style="font-size:0.9rem">ØºÙŠØ± Ù‡Ø§Ù… ÙˆØ¹Ø§Ø¬Ù„</p>
                            <div style="background:rgba(0,0,0,0.3); padding:5px; border-radius:4px; font-size:0.8rem; margin-top:5px">ÙÙˆØ¶Ù‡ Ù„ØºÙŠØ±Ùƒ</div>
                        </div>
                        <div class="grid-box" style="background: linear-gradient(135deg, #64748b, #334155);">
                            <i class="fa-solid fa-trash-can fa-2x"></i>
                            <h3>4. Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¶ÙŠØ§Ø¹</h3>
                            <p style="font-size:0.9rem">ØºÙŠØ± Ù‡Ø§Ù… ÙˆØºÙŠØ± Ø¹Ø§Ø¬Ù„</p>
                            <div style="background:rgba(0,0,0,0.3); padding:5px; border-radius:4px; font-size:0.8rem; margin-top:5px">Ø§ØªØ±ÙƒÙ‡</div>
                        </div>
                    </div>

                    <h3>ğŸ§ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ‚</h3>
                    <p>Ù…Ø¹Ø¸Ù…Ù†Ø§ ÙŠÙ‚Ø¶ÙŠ ÙŠÙˆÙ…Ù‡ ÙÙŠ <strong>Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø±Ù‚Ù… 1</strong> (Ø¥Ø·ÙØ§Ø¡ Ø§Ù„Ø­Ø±Ø§Ø¦Ù‚) Ùˆ <strong>Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø±Ù‚Ù… 3</strong> (Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ù„Ø§ ÙØ§Ø¦Ø¯Ø© Ù…Ù†Ù‡Ø§ØŒ Ø¥ÙŠÙ…ÙŠÙ„Ø§ØªØŒ Ù…ÙƒØ§Ù„Ù…Ø§Øª).</p>
                    <p>Ù„ÙƒÙ† Ø§Ù„Ù†Ø§Ø¬Ø­ÙŠÙ† ÙŠÙ‚Ø¶ÙˆÙ† 70% Ù…Ù† ÙˆÙ‚ØªÙ‡Ù… ÙÙŠ <strong>Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø±Ù‚Ù… 2 (Ø§Ù„Ø£Ø²Ø±Ù‚)</strong>. Ù‡Ø°Ø§ Ù‡Ùˆ Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ¹Ù„Ù…ØŒ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØŒ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§ØªØŒ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶Ø©.</p>

                    <div class="highlight-box">
                        <strong>ØªÙ…Ø±ÙŠÙ† Ø¹Ù…Ù„ÙŠ:</strong>
                        <p>Ø±Ø§Ø¬Ø¹ Ù…Ù‡Ø§Ù…Ùƒ Ù„Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø§Ù„Ù‚Ø§Ø¯Ù…. Ù‡Ù„ ØªØ¬Ø¯ ÙˆÙ‚ØªØ§Ù‹ Ù…Ø®ØµØµØ§Ù‹ Ù„ØªØ¹Ù„Ù… Ù…Ù‡Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø© (Ù…Ø±Ø¨Ø¹ 2)ØŸ Ø¥Ø°Ø§ Ù„Ù… ØªØ¬Ø¯ØŒ ÙØ£Ù†Øª ÙÙŠ Ø®Ø·Ø± Ø§Ù„Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…Ù‡Ù†ÙŠ.</p>
                    </div>
                    
                    <button class="btn-complete" onclick="closeReaderWithSuccess(this)">
                        <span>âœ… Ø§Ø³ØªÙˆØ¹Ø¨Øª Ø§Ù„Ø¯Ø±Ø³</span>
                    </button>
                </div>
            `
        },
        { 
            id: 3, 
            title: "Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù€ 5 Ø«ÙˆØ§Ù†ÙŠ (Mel Robbins)", 
            type: "course", 
            tier: 3, 
            author: "Productivity Coach", 
            date: "2026-02-03",
            desc: "Ø§Ù„Ø£Ø¯Ø§Ø© Ø§Ù„Ù†ÙØ³ÙŠØ© Ø§Ù„Ø£Ù‚ÙˆÙ‰ Ù„Ù„ØªØºÙ„Ø¨ Ø¹Ù„Ù‰ Ø§Ù„ØªØ³ÙˆÙŠÙ ÙˆØ§Ù„ØªØ±Ø¯Ø¯ ÙÙŠ Ù„Ø­Ø¸ØªÙ‡.",
            htmlContent: `
                <div class="course-html">
                    <div style="text-align:center;">
                        <h1 style="font-size:4rem; margin:0; color:var(--primary); font-family:monospace">5 - 4 - 3 - 2 - 1 ğŸš€</h1>
                        <h2 style="margin-top:0">Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù€ 5 Ø«ÙˆØ§Ù†ÙŠ</h2>
                    </div>
                    
                    <div class="highlight-box" style="border-left:4px solid var(--accent); border-right:none">
                        <h3>ğŸ§  Ø§Ù„Ø¹Ù„ÙˆÙ… ÙˆØ±Ø§Ø¡ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©</h3>
                        <p>Ù‡Ù„ ØªØ¹Ù„Ù… Ø£Ù† Ù‡Ù†Ø§Ùƒ "Ù†Ø§ÙØ°Ø© Ø²Ù…Ù†ÙŠØ©" Ù…Ø¯ØªÙ‡Ø§ 5 Ø«ÙˆØ§Ù†ÙŠ ÙÙ‚Ø· Ø¨ÙŠÙ† Ø§Ù„Ù„Ø­Ø¸Ø© Ø§Ù„ØªÙŠ ØªØ£ØªÙŠÙƒ ÙÙŠÙ‡Ø§ ÙÙƒØ±Ø© Ø¬ÙŠØ¯Ø© (Ù…Ø«Ù„Ø§Ù‹: Ø³Ø£Ù‚ÙˆÙ… Ù„Ø£Ø°Ø§ÙƒØ±) ÙˆØ¨ÙŠÙ† Ø§Ù„Ù„Ø­Ø¸Ø© Ø§Ù„ØªÙŠ ÙŠØªØ¯Ø®Ù„ ÙÙŠÙ‡Ø§ Ø¹Ù‚Ù„Ùƒ Ù„ÙŠÙ…Ù†Ø¹ÙƒØŸ</p>
                        <p>Ø¹Ù‚Ù„Ùƒ Ù…ØµÙ…Ù… Ù„Ø­Ù…Ø§ÙŠØªÙƒ Ù…Ù† Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„ ÙˆÙ…Ù† Ø§Ù„ØªØ¹Ø¨. Ø¥Ø°Ø§ ØªØ±Ø¯Ø¯Øª Ù„Ø£ÙƒØ«Ø± Ù…Ù† 5 Ø«ÙˆØ§Ù†ÙØŒ Ø³ÙŠØ¨Ø¯Ø£ Ø¹Ù‚Ù„Ùƒ ÙÙŠ Ø§Ø®ØªÙ„Ø§Ù‚ Ø§Ù„Ø£Ø¹Ø°Ø§Ø± (Ø§Ù„Ø¬Ùˆ Ø¨Ø§Ø±Ø¯ØŒ Ø³Ø£Ø¨Ø¯Ø£ ØºØ¯Ø§Ù‹ØŒ Ø£Ù†Ø§ Ù…ØªØ¹Ø¨).</p>
                    </div>

                    <h3>ÙƒÙŠÙ ØªØ·Ø¨Ù‚Ù‡Ø§ØŸ</h3>
                    <p>Ø§Ù„Ø¹Ø¯ Ø§Ù„Ø¹ÙƒØ³ÙŠ <strong>(5-4-3-2-1)</strong> ÙŠÙØ¹Ù„ Ø´ÙŠØ¦Ø§Ù‹ Ø³Ø­Ø±ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø¯Ù…Ø§Øº:</p>
                    <ul style="line-height:1.8">
                        <li>ÙŠÙ‚Ø·Ø¹ Ø­Ø¨Ù„ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø³Ù„Ø¨ÙŠ (Interrupts Habit Loops).</li>
                        <li>ÙŠÙ†Ø´Ø· Ø§Ù„Ù‚Ø´Ø±Ø© Ø§Ù„Ø¬Ø¨Ù‡ÙŠØ© (Prefrontal Cortex) Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„Ø© Ø¹Ù† Ø§Ù„Ù‚Ø±Ø§Ø± ÙˆØ§Ù„ØªØ­ÙƒÙ….</li>
                    </ul>

                    <h3>Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ù„Ù„ØªØ·Ø¨ÙŠÙ‚:</h3>
                    <ul class="step-list">
                        <li class="step-item">
                            <i class="fa-solid fa-bed fa-2x" style="color:#94a3b8"></i>
                            <div>
                                <strong>Ø§Ù„Ø§Ø³ØªÙŠÙ‚Ø§Ø¸:</strong>
                                <p style="margin:5px 0 0 0; color:#cbd5e1">Ù„Ø§ ØªØ¶ØºØ· ØºÙÙˆØ© (Snooze). Ø¨Ù…Ø¬Ø±Ø¯ Ø³Ù…Ø§Ø¹ Ø§Ù„Ù…Ù†Ø¨Ù‡ØŒ Ø¹Ø¯ 5-4-3-2-1 ÙˆØ§Ù†Ù‡Ø¶ ÙÙˆØ±Ø§Ù‹.</p>
                            </div>
                        </li>
                        <li class="step-item">
                            <i class="fa-solid fa-hand-holding-hand fa-2x" style="color:#94a3b8"></i>
                            <div>
                                <strong>Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª:</strong>
                                <p style="margin:5px 0 0 0; color:#cbd5e1">Ù„Ø¯ÙŠÙƒ ÙÙƒØ±Ø© ÙˆÙ„ÙƒÙ† Ø®Ø§Ø¦ÙØŸ Ø¹Ø¯ 5-4-3-2-1 ÙˆØ§Ø±ÙØ¹ ÙŠØ¯Ùƒ Ù‚Ø¨Ù„ Ø£Ù† ÙŠØ³ÙŠØ·Ø± Ø¹Ù„ÙŠÙƒ Ø§Ù„Ø®ÙˆÙ.</p>
                            </div>
                        </li>
                    </ul>
                    
                    <button class="btn-complete" onclick="closeReaderWithSuccess(this)">
                        <span>âœ… Ø³Ø£Ø·Ø¨Ù‚Ù‡Ø§ Ø§Ù„ÙŠÙˆÙ…</span>
                    </button>
                </div>
            `
        }
    ];
}

        // --- Logic ---
        let allContent = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

        // Force load if empty
        if (allContent.length === 0) {
            allContent = generateCourses();
            localStorage.setItem(STORAGE_KEY, JSON.stringify(allContent));
        }

        function renderAll() {
            const tiers = { 1: [], 2: [], 3: [] };
            allContent.forEach(item => tiers[item.tier].push(item));

            ['tier1', 'tier2', 'tier3'].forEach((id, idx) => {
                const container = document.getElementById(`${id}-container`);
                const items = tiers[idx + 1];
                if (items.length === 0) container.innerHTML = `<div class="empty-state">Ø§Ù„Ù…Ø³Ø§Ø± ÙØ§Ø±Øº Ø­Ø§Ù„ÙŠØ§Ù‹</div>`;
                else {
                    container.innerHTML = items.map(item => `
                        <article class="card">
                            <div class="card-media"><span class="type-badge">COURSE</span><i class="fa-solid fa-laptop-code"></i></div>
                            <div class="card-body"><h3 class="card-title">${item.title}</h3><p class="card-desc">${item.desc}</p></div>
                            <div class="card-actions">
                                <div style="font-size:0.8rem; color:#64748b"><i class="fa-solid fa-user"></i> ${item.author}</div>
                                <button class="btn-action btn-view" onclick="openReader(${item.id})">Ù…Ø¹Ø§ÙŠÙ†Ø© <i class="fa-solid fa-arrow-left"></i></button>
                            </div>
                        </article>`).join('');
                }
            });
        }

        // --- Reader Functions ---
        const readerModal = document.getElementById('readerModal');
        const readerTitle = document.getElementById('readerTitle');
        const readerAuthor = document.getElementById('readerAuthor');
        const readerBody = document.getElementById('readerBody');

        function openReader(id) {
            const item = allContent.find(c => c.id === id);
            if(item && item.htmlContent) {
                readerTitle.innerText = item.title;
                readerAuthor.innerText = "Ø§Ù„Ù…Ø¤Ù„Ù: " + item.author;
                readerBody.innerHTML = item.htmlContent;
                readerModal.style.display = 'flex';
                setTimeout(() => readerModal.classList.add('active'), 10);
            }
        }

        function closeReader() {
            readerModal.classList.remove('active');
            setTimeout(() => readerModal.style.display = 'none', 300);
        }

        // *** ROBUST FUNCTION with fallback ***
        function closeReaderWithSuccess(btnElement) {
            // Safety Check: If button element is missing or undefined
            if (!btnElement) {
                closeReader(); 
                return;
            }

            btnElement.innerHTML = '<span>ØªÙ… Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­ âœ…</span>';
            btnElement.classList.add('success');
            setTimeout(() => closeReader(), 1000);
        }

        renderAll();
        readerModal.onclick = (e) => { if(e.target === readerModal) closeReader(); }
    </script>
</body>
</html>